<?php require_once __DIR__.'/../core/helper.php'; require_once __DIR__.'/../core/db.php'; nxi_require_login(); if($_SESSION['user']['role']!=='admin') die('forbidden'); $db=nxi_db(); $users=$db->query("SELECT id,name,email,role,pub_id FROM users ORDER BY id DESC LIMIT 100"); $ads=$db->query("SELECT id,title,views,clicks,status FROM ads ORDER BY id DESC LIMIT 100"); ?><!doctype html><html><head><meta charset='utf-8'><link rel='stylesheet' href='/public/assets/css/style.css'><title>Admin</title></head><body><div class='container'><h1>Admin Dashboard</h1><div class='card'><h2>Users</h2><table border='1' cellpadding='6'><tr><th>ID</th><th>Name</th><th>Email</th><th>Role</th><th>pub_id</th></tr><?php while($u=$users->fetch_assoc()) echo "<tr><td>{$u['id']}</td><td>".e($u['name'])."</td><td>".e($u['email'])."</td><td>{$u['role']}</td><td>{$u['pub_id']}</td></tr>"; ?></table></div><div class='card'><h2>Ads</h2><table border='1' cellpadding='6'><tr><th>ID</th><th>Title</th><th>Views</th><th>Clicks</th><th>Status</th></tr><?php while($a=$ads->fetch_assoc()) echo "<tr><td>{$a['id']}</td><td>".e($a['title'])."</td><td>{$a['views']}</td><td>{$a['clicks']}</td><td>{$a['status']}</td></tr>"; ?></table></div></div></body></html>
